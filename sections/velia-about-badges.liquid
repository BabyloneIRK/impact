{% comment %}
  Velia — Badges + Meet the Team (premium minimal)
  Section Shopify customisable : badges en haut, carte image + texte en bas
{% endcomment %}

<section class="velia-about-badges section-{{ section.id }}" style="--bg: {{ section.settings.bg | default: '#C1C3AC' }}; --card: {{ section.settings.card_bg | default: '#FFFFFF' }}; --text: {{ section.settings.text_color | default: '#1C1C1C' }}; --muted: {{ section.settings.muted_color | default: '#4B4B4B' }}; --radius: {{ section.settings.radius | default: 24 }}px; --gap: {{ section.settings.gap | default: 28 }}px;">
  <div class="container">

    {%- if section.blocks.size > 0 -%}
    <div class="badges" role="list">
      {%- for block in section.blocks -%}
        {%- if block.type == 'badge' -%}
        <div class="badge" role="listitem" {{ block.shopify_attributes }}>
          <div class="icon">
            {%- if block.settings.icon_svg != blank -%}
              {{ block.settings.icon_svg }}
            {%- elsif block.settings.icon_image != blank -%}
              {{ block.settings.icon_image | image_url: width: 96 | image_tag: alt: block.settings.title, loading: 'lazy' }}
            {%- else -%}
              <!-- Default minimal icon (magnifier) -->
              <svg width="28" height="28" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                <circle cx="11" cy="11" r="7.5" stroke="currentColor" stroke-width="1.6"/>
                <path d="M16.5 16.5L21 21" stroke="currentColor" stroke-width="1.6" stroke-linecap="round"/>
              </svg>
            {%- endif -%}
          </div>
          <div class="label">{{ block.settings.title | escape }}</div>
        </div>
        {%- endif -%}
      {%- endfor -%}
    </div>
    {%- endif -%}

    <div class="card {{ section.settings.image_position }}">
      <div class="media">
        {%- if section.settings.image != blank -%}
          {{ section.settings.image | image_url: width: 1400 | image_tag: alt: section.settings.heading | default: 'Team image', loading: 'lazy', sizes: '(min-width: 990px) 50vw, 100vw' }}
        {%- else -%}
          <div class="media--placeholder" aria-hidden="true"></div>
        {%- endif -%}
      </div>
      <div class="content">
        {%- if section.settings.kicker != blank -%}
          <p class="kicker">{{ section.settings.kicker }}</p>
        {%- endif -%}
        {%- if section.settings.heading != blank -%}
          <h2 class="heading">{{ section.settings.heading }}</h2>
        {%- endif -%}
        {%- if section.settings.richtext != blank -%}
          <div class="richtext rte">{{ section.settings.richtext }}</div>
        {%- endif -%}
        {%- if section.settings.button_label != blank and section.settings.button_link != blank -%}
          <a class="button" href="{{ section.settings.button_link }}">{{ section.settings.button_label }}</a>
        {%- endif -%}
      </div>
    </div>

  </div>

  <style>
    .section-{{ section.id }}{
      background: var(--bg);
      color: var(--text);
      padding: clamp(32px, 5vw, 56px) 0;
      font-family: inherit;
    }
    .section-{{ section.id }} .container{
      width: min(1200px, 92vw);
      margin-inline: auto;
    }
    /* Badges row */
    .section-{{ section.id }} .badges{
      display: grid;
      grid-template-columns: repeat(2, minmax(0,1fr));
      gap: var(--gap);
      align-items: center;
      justify-items: center;
      margin-bottom: clamp(24px, 4vw, 40px);
    }
    @media (min-width: 900px){
      .section-{{ section.id }} .badges{
        grid-template-columns: repeat(4, minmax(0,1fr));
      }
    }
    .section-{{ section.id }} .badge{
      display:flex; flex-direction:column; align-items:center; text-align:center; gap:10px;
    }
    .section-{{ section.id }} .badge .icon{
      color: var(--text);
      display:grid; place-items:center;
      width: 48px; height:48px; border-radius: 999px; background: color-mix(in oklab, var(--card) 70%, var(--bg));
      box-shadow: 0 1px 0 rgba(0,0,0,.04), 0 1px 8px rgba(0,0,0,.06);
    }
    .section-{{ section.id }} .badge .label{
      font-size: 16px; line-height: 1.4; color: var(--text); font-weight: 500;
    }

    /* Card split */
    .section-{{ section.id }} .card{
      display:grid;
      grid-template-columns: 1fr;
      background: var(--card);
      border-radius: var(--radius);
      overflow:hidden;
      box-shadow: 0 2px 24px rgba(0,0,0,.06);
    }
    @media (min-width: 990px){
      .section-{{ section.id }} .card{
        grid-template-columns: 1fr 1fr;
      }
      .section-{{ section.id }} .card.image-right{
        grid-template-columns: 1fr 1fr;
      }
    }

    .section-{{ section.id }} .card.image-right .media{ order: 2; }
    .section-{{ section.id }} .card.image-right .content{ order: 1; }

    .section-{{ section.id }} .media img{ width:100%; height:100%; object-fit: cover; display:block; }
    .section-{{ section.id }} .media--placeholder{
      width: 100%; aspect-ratio: 4/3; background: #EDEDED;
    }

    .section-{{ section.id }} .content{
      padding: clamp(20px, 5vw, 56px);
      display:flex; flex-direction:column; justify-content:center; gap:14px;
    }
    .section-{{ section.id }} .kicker{
      text-transform: uppercase; letter-spacing:.14em; font-size:12px; color: var(--muted); margin:0;
    }
    .section-{{ section.id }} .heading{
      font-size: clamp(24px, 3.2vw, 36px);
      line-height: 1.15; margin: 0;
      font-weight: 600;
    }
    .section-{{ section.id }} .richtext{
      color: var(--muted);
      font-size: 16px; line-height: 1.6;
    }
    .section-{{ section.id }} .button{
      align-self: start;
      margin-top: 6px;
      padding: 12px 18px;
      border-radius: 999px;
      background: var(--text);
      color: #fff;
      text-decoration: none;
      font-weight: 500;
      transition: transform .2s ease, opacity .2s ease;
    }
    .section-{{ section.id }} .button:hover{ transform: translateY(-1px); opacity: .95; }
  </style>
</section>

{% schema %}
{
  "name": "Velia • Badges + Team",
  "tag": "section",
  "class": "section-velia-about-badges",
  "settings": [
    { "type": "color", "id": "bg", "label": "Couleur de fond (section)", "default": "#C1C3AC" },
    { "type": "color", "id": "card_bg", "label": "Couleur de la carte", "default": "#FFFFFF" },
    { "type": "color", "id": "text_color", "label": "Couleur du texte principal", "default": "#1C1C1C" },
    { "type": "color", "id": "muted_color", "label": "Couleur du texte secondaire", "default": "#4B4B4B" },
    { "type": "range", "id": "radius", "min": 0, "max": 40, "step": 2, "unit": "px", "label": "Arrondi de la carte", "default": 24 },
    { "type": "range", "id": "gap", "min": 12, "max": 40, "step": 4, "unit": "px", "label": "Espacement des badges", "default": 28 },

    { "type": "select", "id": "image_position", "label": "Position de l'image", "default": "image-left",
      "options": [
        { "value": "image-left", "label": "Image à gauche" },
        { "value": "image-right", "label": "Image à droite" }
      ]
    },

    { "type": "image_picker", "id": "image", "label": "Image équipe / visuel" },
    { "type": "text", "id": "kicker", "label": "Petit titre (kicker)", "default": "Our philosophy" },
    { "type": "text", "id": "heading", "label": "Titre", "default": "Meet the team" },
    { "type": "richtext", "id": "richtext", "label": "Texte", "default": "<p>Behind Velia is a small, passionate team of creators and skincare enthusiasts who believe that beauty should feel easy, honest and empowering.</p>" },
    { "type": "text", "id": "button_label", "label": "Texte du bouton", "default": "Découvrir Velia" },
    { "type": "url", "id": "button_link", "label": "Lien du bouton" }
  ],
  "blocks": [
    {
      "type": "badge",
      "name": "Badge",
      "settings": [
        { "type": "text", "id": "title", "label": "Titre", "default": "Sensitive Skin Approved" },
        { "type": "image_picker", "id": "icon_image", "label": "Icône (image, optionnel)" },
        { "type": "html", "id": "icon_svg", "label": "Icône SVG (optionnel)", "info": "Collez un SVG inline pour un rendu net." }
      ]
    }
  ],
  "max_blocks": 8,
  "presets": [
    {
      "name": "Velia • Badges + Team",
      "blocks": [
        { "type": "badge", "settings": { "title": "Sensitive Skin Approved" } },
        { "type": "badge", "settings": { "title": "Cruelty Free" } },
        { "type": "badge", "settings": { "title": "Fast Shipping" } },
        { "type": "badge", "settings": { "title": "Easy Returns" } }
      ]
    }
  ]
}
{% endschema %}
